let output = {|{
  "/key/myKey1":
    "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",
  "/key/.version": "Ipqqf+gEfgb5PxlRZXRMbhvlAOpqX/Tp/tb5Ucs=",
  "/domain-key/0":
    "7Suw2wmc+26Zpz9XFvmBuRgZG+dfgn34wfw5Bivj/BEgGYG5UNzXoA90Xec6Gh6hnqGhe/IYMD9bMh8IfbcmxdbJmKxXUzKCCQaQovQ9JY1CLUl/4j0jjxzzlhY=",
  "/config/version": "MA==",
  "/config/unlock-salt": "LPSZZrJbX6Cl9drAmUw55g==",
  "/config/time-offset": "LTI=",
  "/config/private-key":
    "LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2d0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktrd2dnU2xBZ0VBQW9JQkFRREtDcUNET2NzVGNEemEKbTZPRGN0am52R1g1Qi9CN1lMWmVWR0lhQXRzalp2T09JaS83MlltOHk5Wmx2QlRLeTBNNldHNGR1L3BwUjVBSQpmdkR1RFB4bS9nRk51RWlNTmhNUHFuVGtjL1NYbERtMm5rSHZIT1FtbTBKTXhkRTBIVWRTL2FGSlZDUkZiRitUCnlCeHh2SkNWR2gvcndkSlBQT1NnNWp4TjJRUm1pSW1KNVdtdVlLbXQybGJ3cjlyYVEvVy8zUWpxUWNUTEJzTk0KL3dON0FmaW1uSWo0NmE1MFk1MEJwRVR4bkdRSkhlZkV4UXZiOHV6ZlkxWG5lK2ZiRGZ2d3U0Q3NKRGVkQlo5OQp5Z2c0WCsvdEFnUVBmYmxPWTBBVTN0eDM4MTJmVXM5c1pobEZHVFR0SXpVZVkxVzNGejVNSXpLVXJKVEtMUnh3CnMyTXRHY3A3QWdNQkFBRUNnZ0VCQUtyT1V5YTlmRFpodzhDWXBhTGlQQWVsbVp2d0gxbGV5SzUwcmo4SlBSUHYKM0dYRDkwYjJnT0J3ZnorZ3d2OHkyaElBWW8rV3RMdStlVUVGZUUvNEFJWmRwT0o4c2pCL0lwd3k0Z0dsR2hudgpnTjhuYWR4cFUyUmtDNmYxOE1nYkhJcEh5OHUvYTY2WlVUQVJsQ0ovWk1mNHZ4WEQxVFdSNkVNeWdiYmFpa0xYCkdEQjA5RXpLL3ZqYy9PNGNEUjlDWEZhTXhxYmVacTFtNSt5aEpGODRyNVhDaDI1ZG4ySG1GRHZXOUJUSWUva0sKcGZ5b2lGYVJmL2dtWm05dkJKdXFWSVI4Z214RkVRdGtnSUtLY0JFZVRuWXJldGxDNm5VdTZINFI0anZlMmh1WgpkZHgwOTNVMlllUjNOUFl5Y3E5ZzVBZ0phMVZlcWFKTUFPeUZuSzNmMHBFQ2dZRUE4S3BMU09QS2lER3RCdXpyCmw0OGNoYVJJb00wVVBBQjJpZkU0d3dTeFFYU2p2ZkF1b3dIZFl0ZTAyNS9hanJ1anRtb3lzUGxGTFQ5K1kzYnIKQVA0OEtEbUNyL1gwRmIwRVV5S1craktObHNIRW5BQjdRbDRVOWY4VVF6MVhsSFgxamI2Zm9FWllpMnkwYjBlcgpTM3NYcW5YOFZzTVlqTElzTTlJL1VBQ3diME1DZ1lFQTF1cE9vVUNVVDdmNTJhTHhsdEFNR2FQRHNtR2FXWWRqCk5aMEhuUnRJRVI5U3FVODFDODlhWkVhTzk3WVE2aUVvdGJLdXdlUHB3eEszbW1mYXI4MGc3Zk91YS8xc3lnRWkKNVAvbDdrdXhCSTl5QlRDZG93cUdqT1N5VmJTdGZlSEgwVWoxL3I2YUhOU2krbVV6TmJOT2lsR1BLUjNJMXV3Zgp4d0NTaE1Ic3VHa0NnWUVBcFRzVjh4Wko0QlhUQ0xVeXp0eDNwWjEwSzhxQlFPekVkZEtDdVFvSXRMcmpESzNSCkp5TkpudW9nQnNXS1pZS1lWTTQydldCMnlTa1ZtaTUwRER1QWk5Rm9VMnpXeHZIOS9TSDdiQTIzUGpFTXpscGEKUmVlWUZvaXBuYnlJMjZuZERCTTdQdXZ0TU5SU1VUQndmNk1rVFdreDlWTi9FR0hualRDbFBVVXIzVWNDZ1lBeQpNam01U2djWjg0T0V4SjBldDJzTUZnYmdSQkd6OVg1RGlIQzl6aUJ2OTF2c05aYlRNbFFQZGJkd3ZmS0hiTVZBCll3S1VRTEpab0thSGh0ZzZGWFFxZjY3dWhCdUR0dTQ2aEZaazZRTG9hTVNkMTdRSjM2eDdmZkwxTjZVSjhORWwKM1ordkp6K0JtbHlTbFU1M3JYQ2J0OTd6SUlUSFJoRkovcVU2SXIweWVRS0JnUUR2WWo1K1Z2OFd2ZHoyTG5GOQpJWkQvWUF5Y1FVSnJPWWI0VzhDQmhVN1ZHbStGUkdLTnVhRFRBQWFFTXRJV1pvQ254UXE0Q1dMRU5XZm1pOXljCkIrZ2NkKzNjc0d3dVhQRFRoQldhWnFML2FDM3gwQ0JPeUZLd1B6V244MStqWlk1Z05INzJhYU1XT2drMko1NUgKSWdRTlB0a1Y5dEJ0R0lMYmJzT0lFTi9ySkE9PQotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tCg==",
  "/config/certificate":
    "AAACrjCCAqowggGSoAMCAQICCD0dJyyQirF/MA0GCSqGSIb3DQEBCwUAMBQxEjAQBgNVBAMMCWtleWZlbmRlcjAgFw03MDAxMDEwMDAwMDBaGA85OTk5MTIzMTIzNTk1OVowFDESMBAGA1UEAwwJa2V5ZmVuZGVyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAygqggznLE3A82pujg3LY57xl+Qfwe2C2XlRiGgLbI2bzjiIv+9mJvMvWZbwUystDOlhuHbv6aUeQCH7w7gz8Zv4BTbhIjDYTD6p05HP0l5Q5tp5B7xzkJptCTMXRNB1HUv2hSVQkRWxfk8gccbyQlRof68HSTzzkoOY8TdkEZoiJieVprmCprdpW8K/a2kP1v90I6kHEywbDTP8DewH4ppyI+OmudGOdAaRE8ZxkCR3nxMUL2/Ls32NV53vn2w378LuArCQ3nQWffcoIOF/v7QIED325TmNAFN7cd/Ndn1LPbGYZRRk07SM1HmNVtxc+TCMylKyUyi0ccLNjLRnKewIDAQABMA0GCSqGSIb3DQEBCwUAA4IBAQAKU3JGjQrDHsQFKQpyfMAEhrzoFjgyaeGRP7Xm0rnjOLd+FxcYhW+4QULzjx/OBJOIO63/8XVuURUP4QVTSuW1sxMumFuRJ9Sj0cTpsp0HUc3rdsuSoUCv8EfVdhsd0fCzWHLh2y/SAjmeMXzM+avBtWSujoJXD2PmipYv1DeyVFlW2HSUO6F42sM1JXErHfSFy3w8Dpw+mCETqPbGDigX/e//1xPuzKnb3rUUUMoJAWRqlsz5BIHf9xnxTRNv2DOOoiv+QBUFuyUL7nqJ5vVqiQpew5Pi5jx0PO6V/8R2l4SlR1KnzRonFh39TPkn3X0/kuQUFnAvvT3C8ioTtNRh",
  "/config/backup-salt": "cNeWgSz5vvUE4dH/vfRoqw==",
  "/config/backup-key": "KldINihbPKgJPqBwJSRaZmSgTSTBMVb2H6wNv0z6RXc=",
  "/authentication/operator":
    "2C8PycQ/v1wZL8+Xtsomg1oog1pceXquSji8OEPe8GFKwbnnsy6SNWIaMUABhGhSgQGgEMpaPte7bna0WFOI/rWrjoZVaKX1XtvXm+gozFvJwqzKfVw2Gam0JgnuZmv5lfi6r2AgcuHKFHn4cszh1+oNBwPvbP1rwRyC318NfJpzd8d2PRz4e9uyh/YDNWpZINgm/5g94xyzMTIk8VzjLyMOICZq",
  "/authentication/metrics":
    "RhWIhQfVPtQuF876RtYoyIGgGWiox/6vbwgBybrRmWePkqEixs36zaoa4RuN6aHlyXEgM6aw30slS1U4P8FMgxyDjqBDm8Fid4V3l35gDUMYleqss2SJEX7OmL/ZDNybZ/DOveXuWkqWp1akGA8wbSM5bTI0/37XOuXz4HWhZWCuUfQatzBml9XePW5aeFEyKoVczNMpgw4jSE34WEs=",
  "/authentication/backup":
    "wtIr4Lv9RUrs/qiTf7sMJG1LdAaF8lu9hiKg66o/IY/JuqBISgGebuqIzHVX52K1bRo6Qnw5fLU5ZKO++DODtBtRWmxQ5IZcShGfqus12RakjQnHQjayTlVtnLdg7TILeVVSa+rumeQou7IojB5miKfY8swrJycPn+ni4YxRYBto4JaLzNd745AGAPHxw8QU26Ke/WYpzVH6qGlZG/A=",
  "/authentication/admin":
    "WhRxteCycewqI2BeriBHUi/F0hLpPlBhHxHaUCqPOVuNxWzzYH1nmaKc0vP644hHmllLBTaYLAMmHJs4HhWZ6Qakqxmx4OuXpWECjkicyplb/z+BOwYHKSY6DSkcpdMbA1Q5aZx7Fy5Rm3Uk93N4L/D5ZNbKx+bhbNcIdGI8xmgVj2VksT9bG7rwG/YaykUp5oP3foSR63qwkf5nQFSRNtOe",
  "/authentication/.version": "hVTBXp8THUUfGRJZrfkT+4lGSspoPuNy06erWvQ="
}|}

let readfile filename =
  let fd = Unix.openfile filename [Unix.O_RDONLY] 0 in
  let filesize = (Unix.stat filename).Unix.st_size in
  let buf = Bytes.create filesize in
  let rec read off =
    if off = filesize
    then ()
    else
      let bytes_read = Unix.read fd buf off (filesize - off) in
      read (bytes_read + off)
  in
  read 0;
  Unix.close fd;
  Bytes.to_string buf

let () =
  let returncode = Sys.command "../bin/export_backup.exe BackupPassphrase my_backup.bin --output=my_backup.json" in
  assert (returncode = 0);
  let body = readfile "my_backup.json" in
  assert (String.equal output body)
